<!DOCTYPE html>

<head>
  <script>
    process = {
      env: {
        NODE_ENV: "production"
      }
    }
  </script>
  <script type="importmap">
    {
      "imports": {
        "@reduxjs/toolkit": "./scripts/deps/redux_bundled.js",
        "wctk": "./scripts/deps/wctk_bundled.js",
        "components": "./scripts/components/mod.js"
      }
    }
  </script>
  <script type="module" src="./mod.js"></script>

  <style>
    li {
      list-style: none;
      padding: none;
      margin: none;
    }
    [shape=circle], [shape=square] {
      block-size: 2rem;
      inline-size: 2rem;
      border: 2px solid black;
    }
    [shape=circle] {
      border-radius: 2rem;
    }
  </style>
</head>
<body>
  <header>
    <h2>
      <span>WCTK</span> + <span>Redux</span>
    </h2>
    <p>
      The example below demonstrates how to subscribe webcomponents
      to a redux store using
      <a href="https://github.com/w-lfpup/wctk-js/" target="_blank">the web component toolkit</a>.
    </p>
    <p>
      The <span>shape-controls</span> component dispatches actions to a datastore, while the <span>shape-list</span>
      and <span>shape-count</span> components listen for state updates from the datastore.
    </p>
  </header>
  <main>
    <section>
      <shape-controls>
        <template shadowrootmode="closed">
          <div>
            <button action="shapes/decrement_circles" tabindex="0">-</button>
            circles
            <button action="shapes/increment_circles" tabindex="0">+</button>
          </div>
          <div>
            <button action="shapes/decrement_squares" tabindex="0">-</button>
            squares
            <button action="shapes/increment_squares" tabindex="0">+</button>
          </div>
          <button action="shapes/reset" tabindex="0">reset</button>
        </template>
      </shape-controls>
      <shape-table>
        <template shadowrootmode="closed">
          <table>
            <tr>
              <td>
                <slot name="circle_count"></slot>
              </td>
              <td>circles</td>
            </tr>
            <tr>
              <td>
                <slot name="square_count"></slot>
              </td>
              <td>squares</td>
            </tr>
            <tr>
              <td>
                <slot name="total"></slot>
              </td>
              <td>total</td>
            </tr>
          </table>
        </template>

        <span slot="circle_count">4</span>
        <span slot="square_count">6</span>
        <span slot="total">10</span>
      </shape-table>
    </section>
    <shape-list>
      <template shadowrootmode="closed">
        <style>
          ul {
            padding: 0;
          }
        </style>
        <ul>
          <slot></slot>
        </ul>
      </template>

      <li shape=square></li>
      <li shape=circle></li>
      <li shape=square></li>
      <li shape=square></li>
      <li shape=circle></li>
      <li shape=circle></li>
      <li shape=square></li>
      <li shape=square></li>
      <li shape=square></li>
      <li shape=circle></li>
    </shape-list>
  </main>
</body>
